import 'package:get/get.dart';
import 'package:last_fm_api/models/albumdetail.dart';
import 'package:last_fm_api/models/album.dart';
import 'package:last_fm_api/models/albummatches.dart';
import 'package:last_fm_api/network/exception/network_exceptions.dart';
import 'package:last_fm_api/network/repository/album_repository/album_repository.dart';
import 'package:last_fm_api/network/result/api_result.dart';

class AlbumRepositoryMock extends GetxService implements AlbumRepository {
  static AlbumRepositoryMock get to => Get.find<AlbumRepositoryMock>();

  @override
  Future<ApiResult<Albumdetail>> fetchAlbumDetail({String? mbid, String? album, String? artist}) async {
    try {
      dynamic response =
          r"""{"album":{"artist":"Disturbed","tags":{"tag":[{"url":"https:\/\/www.last.fm\/tag\/metal","name":"metal"},{"url":"https:\/\/www.last.fm\/tag\/hard+rock","name":"hard rock"},{"url":"https:\/\/www.last.fm\/tag\/nu+metal","name":"nu metal"},{"url":"https:\/\/www.last.fm\/tag\/alternative+metal","name":"alternative metal"},{"url":"https:\/\/www.last.fm\/tag\/rock","name":"rock"}]},"name":"Believe","image":[{"size":"small","#text":"https:\/\/lastfm.freetls.fastly.net\/i\/u\/34s\/dcf5cf4b9da64e979719a102acd222cc.png"},{"size":"medium","#text":"https:\/\/lastfm.freetls.fastly.net\/i\/u\/64s\/dcf5cf4b9da64e979719a102acd222cc.png"},{"size":"large","#text":"https:\/\/lastfm.freetls.fastly.net\/i\/u\/174s\/dcf5cf4b9da64e979719a102acd222cc.png"},{"size":"extralarge","#text":"https:\/\/lastfm.freetls.fastly.net\/i\/u\/300x300\/dcf5cf4b9da64e979719a102acd222cc.png"},{"size":"mega","#text":"https:\/\/lastfm.freetls.fastly.net\/i\/u\/300x300\/dcf5cf4b9da64e979719a102acd222cc.png"},{"size":"","#text":"https:\/\/lastfm.freetls.fastly.net\/i\/u\/300x300\/dcf5cf4b9da64e979719a102acd222cc.png"}],"tracks":{"track":[{"streamable":{"fulltrack":"0","#text":"0"},"duration":219,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Prayer","name":"Prayer","@attr":{"rank":1},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":206,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Liberate+-+Amended+Version","name":"Liberate - Amended Version","@attr":{"rank":2},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":269,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Awaken","name":"Awaken","@attr":{"rank":3},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":267,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Believe","name":"Believe","@attr":{"rank":4},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":251,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Remember","name":"Remember","@attr":{"rank":5},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":194,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Intoxication","name":"Intoxication","@attr":{"rank":6},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":237,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Rise","name":"Rise","@attr":{"rank":7},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":226,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Mistress","name":"Mistress","@attr":{"rank":8},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":261,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Breathe","name":"Breathe","@attr":{"rank":9},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":233,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Bound","name":"Bound","@attr":{"rank":10},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":232,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Devour","name":"Devour","@attr":{"rank":11},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}},{"streamable":{"fulltrack":"0","#text":"0"},"duration":388,"url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe\/Darkness","name":"Darkness","@attr":{"rank":12},"artist":{"url":"https:\/\/www.last.fm\/music\/Disturbed","name":"Disturbed","mbid":""}}]},"listeners":"778057","playcount":"13663900","url":"https:\/\/www.last.fm\/music\/Disturbed\/Believe","wiki":{"published":"10 Oct 2008, 04:45","summary":"Believe is the second album by the American rock band, Disturbed. It was released September 17, 2002. It debuted at #1 on the Billboard 200 chart, making it Disturbed's first #1 debut and sold 284,000 copies in its first week. There was also a limited edition release issued with a supplementary DVD and deluxe packaging. <a href=\"https:\/\/www.last.fm\/music\/Disturbed\/Believe\">Read more on Last.fm<\/a>.","content":"Believe is the second album by the American rock band, Disturbed. It was released September 17, 2002. It debuted at #1 on the Billboard 200 chart, making it Disturbed's first #1 debut and sold 284,000 copies in its first week. There was also a limited edition release issued with a supplementary DVD and deluxe packaging. <a href=\"https:\/\/www.last.fm\/music\/Disturbed\/Believe\">Read more on Last.fm<\/a>. User-contributed text is available under the Creative Commons By-SA License; additional terms may apply."}}}""";

      Albumdetail albumDetail = Albumdetail.fromJson(response["album"]);
      return ApiResult.success(data: albumDetail);
    } catch (e) {
      return ApiResult.failure(error: NetworkExceptions.getDioException(e));
    }
  }

  @override
  Future<ApiResult<List<Album>>> fetchAlbums({int? page, int? limit, String? search}) async {
    try {
      dynamic response = r"""
    {"results":{"opensearch:Query":{"#text":"","role":"request","searchTerms":"Linkin","startPage":"1"},"opensearch:totalResults":"149708","opensearch:startIndex":"0","opensearch:itemsPerPage":"5","albummatches":{"album":[{"name":"Meteora","artist":"Linkin Park","url":"https://www.last.fm/music/Linkin+Park/Meteora","image":[{"#text":"https://lastfm.freetls.fastly.net/i/u/34s/b636ff6f39f8dd435c89fc7bd2e002f8.png","size":"small"},{"#text":"https://lastfm.freetls.fastly.net/i/u/64s/b636ff6f39f8dd435c89fc7bd2e002f8.png","size":"medium"},{"#text":"https://lastfm.freetls.fastly.net/i/u/174s/b636ff6f39f8dd435c89fc7bd2e002f8.png","size":"large"},{"#text":"https://lastfm.freetls.fastly.net/i/u/300x300/b636ff6f39f8dd435c89fc7bd2e002f8.png","size":"extralarge"}],"streamable":"0","mbid":"f3bfd870-0708-46d0-9953-9f5f573fb600"},{"name":"Hybrid Theory","artist":"Linkin Park","url":"https://www.last.fm/music/Linkin+Park/Hybrid+Theory","image":[{"#text":"https://lastfm.freetls.fastly.net/i/u/34s/b88840f7d608082a85588b2efbbd2d21.png","size":"small"},{"#text":"https://lastfm.freetls.fastly.net/i/u/64s/b88840f7d608082a85588b2efbbd2d21.png","size":"medium"},{"#text":"https://lastfm.freetls.fastly.net/i/u/174s/b88840f7d608082a85588b2efbbd2d21.png","size":"large"},{"#text":"https://lastfm.freetls.fastly.net/i/u/300x300/b88840f7d608082a85588b2efbbd2d21.png","size":"extralarge"}],"streamable":"0","mbid":"f0cd4041-f859-4b97-b563-3b5f33f98d9d"},{"name":"Minutes to Midnight","artist":"Linkin Park","url":"https://www.last.fm/music/Linkin+Park/Minutes+to+Midnight","image":[{"#text":"https://lastfm.freetls.fastly.net/i/u/34s/185a38ca7368d2c9ad9cb9ea95ae05f4.png","size":"small"},{"#text":"https://lastfm.freetls.fastly.net/i/u/64s/185a38ca7368d2c9ad9cb9ea95ae05f4.png","size":"medium"},{"#text":"https://lastfm.freetls.fastly.net/i/u/174s/185a38ca7368d2c9ad9cb9ea95ae05f4.png","size":"large"},{"#text":"https://lastfm.freetls.fastly.net/i/u/300x300/185a38ca7368d2c9ad9cb9ea95ae05f4.png","size":"extralarge"}],"streamable":"0","mbid":"d08a98b7-0c33-40d6-b574-ff0ce1600af7"},{"name":"Living Things","artist":"Linkin Park","url":"https://www.last.fm/music/Linkin+Park/Living+Things","image":[{"#text":"https://lastfm.freetls.fastly.net/i/u/34s/5dda2ee492c00966c166665454e10c2d.png","size":"small"},{"#text":"https://lastfm.freetls.fastly.net/i/u/64s/5dda2ee492c00966c166665454e10c2d.png","size":"medium"},{"#text":"https://lastfm.freetls.fastly.net/i/u/174s/5dda2ee492c00966c166665454e10c2d.png","size":"large"},{"#text":"https://lastfm.freetls.fastly.net/i/u/300x300/5dda2ee492c00966c166665454e10c2d.png","size":"extralarge"}],"streamable":"0","mbid":"bb58b36a-81ce-4b61-a757-fc937b9f95f4"},{"name":"A Thousand Suns","artist":"Linkin Park","url":"https://www.last.fm/music/Linkin+Park/A+Thousand+Suns","image":[{"#text":"https://lastfm.freetls.fastly.net/i/u/34s/2174f7b60b8b4db6b7e5c0a402aee3ef.png","size":"small"},{"#text":"https://lastfm.freetls.fastly.net/i/u/64s/2174f7b60b8b4db6b7e5c0a402aee3ef.png","size":"medium"},{"#text":"https://lastfm.freetls.fastly.net/i/u/174s/2174f7b60b8b4db6b7e5c0a402aee3ef.png","size":"large"},{"#text":"https://lastfm.freetls.fastly.net/i/u/300x300/2174f7b60b8b4db6b7e5c0a402aee3ef.png","size":"extralarge"}],"streamable":"0","mbid":"5ae5a7e2-738e-4291-805f-f05cec3e6544"}]},"@attr":{"for":"Linkin"}}}""";

      List<Album> albumList = Albummatches.fromJson(response["results"]["albummatches"]).album;
      return ApiResult.success(data: albumList);
    } catch (e) {
      return ApiResult.failure(error: NetworkExceptions.getDioException(e));
    }
  }
}
